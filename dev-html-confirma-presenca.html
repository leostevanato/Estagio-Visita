<!DOCTYPE html>
<html lang="pt-br">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>

	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,300;0,400;0,700;0,900;1,300;1,400;1,700;1,900&display=swap" rel="stylesheet">

	<link rel="stylesheet" href="css/confirma-inscricao.css" />
	<script>
		const queryString = window.location.search;
		const urlParams = new URLSearchParams(queryString);
		const paginaId = urlParams.get('id');

		var url_mdl_arquivos = '';

		let response_promise = fetch(url_mdl_arquivos + 'html-confirma-inscricao.html');

		let curso_promise = fetch(url_mdl_arquivos + 'curso-configuracoes.json', {
			headers: {
				'Accept': 'application/json'
			}
		});

		var elemento_conteudo_seletor = '#curso-confirma-inscricao';
		var elemento_alvo_seletor = '.box';
		var data_periodo_seletor = 'a.link-teste';
		var botao_cta_seletor = elemento_conteudo_seletor + ' > .conteudo > .botao-cta';

		document.addEventListener("DOMContentLoaded", function () {
			response_promise.then(response => {
				return response.text();
			}).then(responseHTMLtext => {
				// This is the HTML from our response as a text string
				var parser = new DOMParser();
				var docHTML = parser.parseFromString(responseHTMLtext, 'text/html');
				
				var elemento_conteudo = docHTML.querySelector(elemento_conteudo_seletor);
				var elemento_alvo = document.querySelector(elemento_alvo_seletor);
				
				elemento_alvo.innerHTML = elemento_conteudo.outerHTML;
	
				let data_periodo = document.querySelector(data_periodo_seletor).textContent.trim();
	
				let regex_data_periodo = /([0-9]{2}[\-/ \.][0-9]{2})\s*-\s*(.+)/;
				var data_periodo_result = data_periodo.match(regex_data_periodo);
	
				document.querySelector(botao_cta_seletor).addEventListener("click", function (event) {
					if (this.getAttribute("data-link") != null) {
						window.open(this.getAttribute("data-link"));
						return false;
					}
				});
				
				curso_promise.then(response => {
					return response.json();
				}).then(cursoJSON => {
					
				}).catch(error => {
					console.log("ERRO: " + error);
				});
			}).catch(function (erro) {
				console.warn('ERRO: ', erro);
			});
		}, false);
	</script>
</head>
<body>
	<a class="link-teste" href="https://www.educacaoadistancia.camara.leg.br/ead_cfd/mod/page/view.php?id=15735" title="Página">21.09 - Manhã</a>

	<div class="path-mod-page">
		<div class="box"></div>
	</div>
</body>
</html>